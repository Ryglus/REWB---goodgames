(function() {
  if ($('[id="darkSwitch"]').length) {
    initTheme();
    function initTheme() {
      $('[id="darkSwitch"]').each(function(){
        $(this).click(function () {
          resetTheme();
        });
      })
      var darkThemeSelected = localStorage.getItem("darkSwitch") !== null && localStorage.getItem("darkSwitch") === "dark";
      /*
      darkThemeSelected ? document.body.setAttribute("data-theme", "dark") : document.body.removeAttribute("data-theme");
      */
        !darkThemeSelected
        ? $('[id="darkSwitch"]').each(function(){
          $(this).children(0).addClass("bi bi-moon-fill");
          $(this).attr("aria-pressed","true")
        })
        : $('[id="darkSwitch"]').each(function(){
          $(this).children(0).addClass("bi bi-brightness-high-fill")
          $(this).attr("aria-pressed","false");
        })
    }
    function resetTheme() {
      $('[id="darkSwitch"]').each(function(){
        if ($(this).data("aria-pressed")=="true") {
          document.body.setAttribute("data-theme", "dark");
          localStorage.setItem("darkSwitch", "dark");
          $(this).children(0).addClass("bi bi-brightness-high-fill")
          $(this).data("aria-pressed","false");
        } else {
          document.body.removeAttribute("data-theme");
          localStorage.removeItem("darkSwitch");
          $(this).children(0).addClass("bi bi-moon-fill");     
          $(this).data("aria-pressed","true");
        }
      })
     
    }
  }
})();

